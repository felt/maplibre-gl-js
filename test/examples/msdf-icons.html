<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='../../dist/maplibre-gl.css' />
    <script src='../../dist/maplibre-gl-dev.js'></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }

        #slidecontainer {
            position: absolute;
            background: #fff;
            top: 0;
            left: 0;
            padding: 10px;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <div id="slidecontainer">
        <input type="range" min="1" max="5" value="1" step="1" class="slider" id="size">
        <p id="sizeOut">size: 1</p>

        <input type="range" min="0.0" max="10.0" value="0" step="1" class="slider" id="haloWidth">
        <p id="haloWidthOut">halo: 0</p>

        <input type="range" min="0.0" max="0.1" value="0.08" step="0.01" class="slider" id="weight">
        <p id="weightOut">weight: 0.08</p>

    </div>
    <script>
        const map = new maplibregl.Map({
            container: 'map',
            style: {
    "zoom": 0.8619833357855968,
    "pitch": 0,
    "center": [
        17.65431710431244,
        32.954120326746775
    ],
    "sprite": [
      {"id": "msdf", "url": "http://localhost:9966/sprite/msdf" },
      {"id": "msdf-backgrounds", "url": "http://localhost:9966/sprite/msdf-backgrounds" },
    ],
    "glyphs": "https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",
    "layers": [
      {
          id: "background",
          type: "background",
          minzoom: 0,
          layout: {},
          paint: {
            "background-color": "red",
          },
        },
        {
          "id": "centroids",
          "type": "symbol",
          "paint": {
            "icon-color" : "hsl(81, 54.99999999999999%, 53%)",
            "icon-halo-color" : "rgb(0%, 0%, 100%)",
            "icon-halo-width": 0,
          },
          "filter": [
              "all"
          ],
          "layout": {
            "icon-overlap": "always",
            "icon-image": "msdf:airport",
            "icon-size" : [
              "interpolate",
              [
                  "linear"
              ],
              [
                  "get",
                  "stf"
              ],
              1,
              0.5,
              99,
              3
          ],
            "visibility" : "visible"
          },
          "source": "felt",
          "source-layer": "parsed",
          "maxzoom": 24
      }
    ],
    "bearing": 0,
    "sources": {
        "felt": {
    "type": "vector",
    "tiles": [
        "https://data-pipeline.felt.com/vectortile/acb04827-96ad-4293-97c0-778d8eb28d0a/{z}/{x}/{y}.pbf"
    ],
    "tileSize": 512,
    "maxzoom": 18
}
    },
    "version": 8
},
            center: [8, 47],
            zoom: 3,
            hash: 'map'
        });


        map.on('load', () => {

            function updateMap() {
                var size = Number(document.getElementById("size").value);
                map.setLayoutProperty('centroids', 'icon-size', size);

                var haloWidth = Number(document.getElementById("haloWidth").value);
                map.setPaintProperty('centroids', 'icon-halo-width', haloWidth);
            }

            // updateMap();

            var sizeSlider = document.getElementById("size");

            sizeSlider.oninput = function () {
                updateMap();
                document.getElementById("sizeOut").innerHTML = `size: ${document.getElementById("size").value}`;
            }

            var haloWidthSlider = document.getElementById("haloWidth");

            haloWidthSlider.oninput = function () {
                updateMap();
                document.getElementById("haloWidthOut").innerHTML = `halo: ${document.getElementById("haloWidth").value}`;
            }
        });

    </script>
</body>

</html>